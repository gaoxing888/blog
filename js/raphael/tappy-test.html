<html>
<head>
	<title>tappy test</title>

	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
	<script type="text/javascript">

		/*! Tappy! - a lightweight normalized tap event. Copyright 2013 @scottjehl, Filament Group, Inc. Licensed MIT */
		(function( w, $, undefined ){

			var tap = function( $els ){
				return $els.each(function(){

					var $el = $( this ),
						lastE,
						resetTimer,
						lastScroll,
						scrollTolerance = 15;

					function trigger( e ){
						e.stopImmediatePropagation();
						e.preventDefault();
						$( e.target ).trigger( "tap", [ e, $( e.target ).attr( "href" ) ] );
					}

					function start( e ){
						lastScroll = w.document.body.scrollTop;
					}

					function end( e ){

						if( e.ctrlKey || e.metaKey ){
							return;
						}

						e.preventDefault();

						// this part prevents a double callback from touch and mouse on the same tap
						if( lastE && lastE !== e.type ){
							return false;
						}

						lastE = e.type;
						clearTimeout( resetTimer );
						resetTimer = setTimeout( function(){
							lastE = null;
						}, 1000 );

						// if a scroll happened between touchstart and touchend
						if( e.type === "touchend" && Math.abs( w.document.body.scrollTop - lastScroll ) > scrollTolerance ){
							return false;
						}

						trigger( e );
					}

					$el
						.bind( "touchstart", start )
						.bind( "touchend", end )
						.bind( "click", end );
				});
			};

			// monkeybind
			var oldBind = $.fn.bind;
			$.fn.bind = function( evt, callback ){
				if( /(^| )tap( |$)/.test( evt ) ){
					tap( this );
				}
				return oldBind.apply( this, [evt, callback] );
			};

		}( this, jQuery ));

	</script>
	<style type="text/css">
		li{margin:100px;}
	</style>
</head>
<body>
	
	<p>页面链接快速响应，取消300毫秒延迟</p>
	<p><a href="https://github.com/filamentgroup/tappy/blob/master/tappy.js">https://github.com/filamentgroup/tappy/blob/master/tappy.js</a></p>

	<dl>
		<dt>可能存在的问题</dt>
		<dd>绑定tap的元素无法在响应 click  事件</dd>
		<dd></dd>
	</dl>

	<a href="#" id="clicka"> click 事件 </a>
	<div id="links">
		<ul>

			<li><a href="http://www.baidu.com" > baidu.com </a></li>
			<li><a href="http://www.sina.com" > sina.com </a></li>
			<li><a href="http://www.taobao.com" > taobao.com </a></li>
			<li><a href="http://www.alipay.com" > alipay.com </a></li>

		</ul>
	</div>
	<script type="text/javascript">
		var time = 0;
		/**
		$('a').bind('click', function(){
			alert("click")
		});
		*/
		$('#clicka').bind("click", function(){
			alert("click");
		});

		$('#links a').bind("tap", function(){

			
			//var element = $(this);
			alert( "tap" );
			//alert( element.attr("href") )

		});

	</script>
</body>
</html>